<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" sizes="57x57" href="/static/icon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/static/icon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/static/icon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/static/icon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/static/icon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/static/icon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/static/icon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/static/icon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/icon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/static/icon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/icon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/static/icon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/icon/favicon-16x16.png">
    <link rel="manifest" href="/static/icon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/static/icon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <title>{% block title %}{% endblock %}</title>
    <link href="/static/css/bootstrap.min.css?2" rel="stylesheet">
    <link href="/static/bootflat/css/bootflat.min.css" rel="stylesheet">
    <link href="/static/css/font-awesome.min.css" rel="stylesheet">
    <link href="/static/css/bootstrap-select.min.css" rel="stylesheet">
    <link href="/static/css/perfect-scrollbar.min.css" rel="stylesheet">
    <link href="/static/css/amaran.min.css" rel="stylesheet">
    <link href="/static/css/animate.min.css" rel="stylesheet">
    <link href="/static/css/tooltipster.css" rel="stylesheet">
    <link href="/static/css/themes/tooltipster-shadow.css" rel="stylesheet">

    <script src="/static/js/jquery.min.js?2"></script>
    <script>

        function getFormattedDate(date) {
            var year = date.getFullYear();
            var month = (1 + date.getMonth()).toString();
            month = month.length > 1 ? month : '0' + month;
            var day = date.getDate().toString();
            day = day.length > 1 ? day : '0' + day;
            return day + '.' + month + '.' + year;
        }
    </script>
    <script type="text/javascript">
        var _paq = _paq || [];
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function () {
            var u = "//home/piwik/";
            _paq.push(['setTrackerUrl', u + 'piwik.php']);
            _paq.push(['setSiteId', 2]);
            var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
            g.type = 'text/javascript';
            g.async = true;
            g.defer = true;
            g.src = u + 'piwik.js';
            s.parentNode.insertBefore(g, s);
        })();
    </script>
    <noscript><p><img src="//home/piwik/piwik.php?idsite=2" style="border:0;" alt=""/></p></noscript>

    <style>
        @font-face {
            font-family: 'Open Sans';
            font-style: normal;
            font-weight: 300;
            src: local('Open Sans Light'), local('OpenSans-Light'), url(/static/fonts/OpenSans/OpenSans-Light.ttf);
        }

        @font-face {
            font-family: 'Open Sans';
            font-style: normal;
            font-weight: 400;
            src: local('Open Sans'), local('OpenSans'), url(/static/fonts/OpenSans/OpenSans-Regular.ttf)
        }

        @font-face {
            font-family: 'Open Sans';
            font-style: normal;
            font-weight: 700;
            src: local('Open Sans Bold'), local('OpenSans-Bold'), url(/static/fonts/OpenSans/OpenSans-Bold.ttf)
        }

        * {
            font-family: 'Open Sans', sans-serif;
        }

        .animated.fast {
            -webkit-animation-duration: .3s;
            animation-duration: .3s;
        }

        a.panel-body {
            font-size: 16pt;
            border: #ddd 1px solid;
            border-radius: 5px;
            display: block;
            text-align: center;
        }

        a.panel-body:hover {
            text-decoration: none;
        }

        .twitter-typeahead {
            width: 100%;
            vertical-align: bottom;
        }

        .twitter-typeahead .tt-search-field,
        .twitter-typeahead .tt-hint {
            margin-bottom: 0;
            font-family: 'Open Sans', sans-serif;
            height: 34px;
            padding: 6px 12px;
            font-size: 14px;
            line-height: 1.42857143;

            font-weight: 100;
        }

        .input-group .twitter-typeahead {
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
        }

        .tt-dropdown-menu {
            min-width: 160px;
            margin-top: 2px;
            padding: 5px 0;
            background-color: #fff;
            border: 1px solid #ccc;
            border: 1px solid rgba(0, 0, 0, .2);
            *border-right-width: 2px;
            *border-bottom-width: 2px;
            -webkit-border-radius: 6px;
            -moz-border-radius: 6px;
            border-radius: 6px;
            -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, .2);
            -moz-box-shadow: 0 5px 10px rgba(0, 0, 0, .2);
            box-shadow: 0 5px 10px rgba(0, 0, 0, .2);
            -webkit-background-clip: padding-box;
            -moz-background-clip: padding;
            background-clip: padding-box;
            width: 100%;
        }

        .tt-suggestion {
            display: block;
            padding: 3px 20px;
        }

        .tt-suggestion.tt-is-under-cursor {
            color: #fff;
            background-color: #0081c2;
            background-image: -moz-linear-gradient(top, #0088cc, #0077b3);
            background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#0088cc), to(#0077b3));
            background-image: -webkit-linear-gradient(top, #0088cc, #0077b3);
            background-image: -o-linear-gradient(top, #0088cc, #0077b3);
            background-image: linear-gradient(to bottom, #0088cc, #0077b3);
            background-repeat: repeat-x;
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0088cc', endColorstr='#ff0077b3', GradientType=0)
        }

        .tt-suggestion.tt-is-under-cursor a {
            color: #fff;
        }

        .tt-suggestion p {
            margin: 0;
        }

        span.isloading-wrapper {
            text-align: center;
            color: #000;
            padding: 10px;
            display: inline-block;
        }

        .isloading-wrapper i {
            -webkit-animation: spin 4s linear infinite;
            -moz-animation: spin 4s linear infinite;
            animation: spin 4s linear infinite;
        }

        .isloading-overlay {
            background-color: transparent !important
        }

        @-moz-keyframes spin {
            100% {
                -moz-transform: rotate(360deg);
            }
        }

        @-webkit-keyframes spin {
            100% {
                -webkit-transform: rotate(360deg);
            }
        }

        @keyframes spin {
            100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
            }
        }

        .table-sm-pd td:not(.ref) {
            padding: 3px !important;
        }

        .table-sm-pd table {
            margin: 0;
        }

        #result-form td {

        }

        #result-form .input-group input {
            border-radius: 5px;
        }

        #result-form .input-group-addon {
            float: none;
            width: 100%;
            display: inline-block;
            margin: 0;
            border: none;
            background: transparent;
        }

        .open .dropdown-toggle.btn-default {
            background-color: #434a54;
        }

        .dropdown-toggle.btn-default:hover, .dropdown-toggle.btn-default:focus, .dropdown-toggle.btn-default:active {
            background-color: #656D78;
        }

        .dropdown-toggle.btn-default:focus, .dropdown-toggle.btn-default:active {
            background-color: #fff;
            color: #434a54;
        }

        .hex-color-picker-wrapper .color-block {
            display: inline-block;
        }

        .hex-color-picker-wrapper .picker-row {
            text-align: center;
            width: 100%;
        }

        .hex-color-picker-wrapper .picker-sidebar {
            float: right;
            font-size: 0;
        }

        .hex-color-picker-wrapper .color-picker-container {
            float: left;
            font-size: 0;
        }

        .hex-color-picker-wrapper .picker-form {
            width: 100%;
            position: relative;
        }

        .hex-color-picker-wrapper .picker-form-wrapper {
            clear: both;
        }

        .hex-color-picker-wrapper .picker-form .selected-color {
            width: 100%;
            box-sizing: border-box;
        }

        .hex-color-picker-wrapper .picker-form .submit {
            position: absolute;
            top: 0;
            right: 0;
        }

        .hex-color-picker-wrapper .picker-form input {
            border: medium;
            border-radius: 0;
            font-size: 12px;
            height: 30px;
            margin: 0;
            padding: 3px 5px;
        }

        .sq {
            padding: 3px;
            display: inline-block;
            background-color: #efefef;
            border: 1px solid #bbb;
            border-radius: 5px;
            margin-right: 5px;
            vertical-align: middle;
        }

        .tube {
            padding: 2px;
            margin-top: 3px;
            margin-bottom: 3px;
            font-size: 10pt;
        }

        .tube:hover {
            background-color: #3BAFDA;
            cursor: pointer;
            color: #fff
        }

        .color-sq {
            height: 12px;
            width: 12px;
        }

        .btn-primary-nb, .btn-primary-nb:focus, .btn-primary-nb:active {
            width: 100% !important;
            background-color: #AAB2BD !important;
            color: #F5F7FA !important;
            border: 1px solid #AAB2BD !important;
        }

        .btn-primary-nb:hover {
            background-color: #049372 !important;
            border: 1px solid #049372 !important;
        }

        .btn-primary-rm:hover {
            background-color: #FC6E51 !important;
            border: 1px solid #FC6E51 !important;
        }

        .btn-blue-nb, .btn-blue-nb:active, .btn-blue-nb:focus {
            background-color: #AAB2BD !important;
            border: 1px solid #AAB2BD !important;
        }

        .btn-blue-nb:hover {
            background-color: #434A54 !important;
            border: 1px solid #434A54 !important;
        }

        .btn-blue2-nb {
            background-color: #AAB2BD;
            border: 1px solid #AAB2BD;
            color: #fff;
            font-size: 12px;
            padding: 2px;
            height: 23px;
            min-width: 28px;
        }

        .btn-blue2-nb[disabled], .btn-blue2-nb.disabled {
            background-color: #AAB2BD;
            border: 1px solid #AAB2BD;
            color: #ddd;
            font-size: 12px;
            padding: 2px;
            height: 23px;
            min-width: 28px;
        }

        .btn-blue2-nb:hover {
            background-color: #3BAFDA !important;
            border: 1px solid #3BAFDA !important;
        }

        .btn-blue-nb:active {
            background-color: #37BC9B !important;
            border: 1px solid #37BC9B !important;
        }

        .tube .label {
            float: right;
        }

        .last-tube, .edit-tube {
            color: #ffffff !important;
            background-color: #37BC9B !important;
        }

        .breadcrumb-arrow li a {
            position: relative;
            color: #fff;
            text-decoration: none;
            background-color: #656D78;
            border: 1px solid #656D78;
        }

        .breadcrumb-arrow li a:after {
            right: -11px;
            z-index: 2;
            border-left: 11px solid #656D78;
        }

        .breadcrumb-arrow li a:before {
            right: -10px;
            z-index: 3;
            border-left-color: #656D78;
            border-left-style: solid;
            border-left-width: 11px;
        }

        .breadcrumb-arrow li a:hover {
            background-color: #3BAFDA;
            border: 1px solid #3BAFDA;
        }

        .breadcrumb-arrow li a:focus:before, .breadcrumb-arrow li a:hover:before {
            border-left-color: #3BAFDA;
        }

        .dash-buttons {
            margin-top: 5px;
        }

        .dash-buttons > div:not(.mb10) {
            padding-right: 2px;
            padding-left: 2px;
        }

        .dash-buttons > div.mb10 {
            padding-right: 2px;
            padding-left: 2px;
            display: inline-block;
            float: none;
            margin-right: -4px;
            vertical-align: bottom;
        }

        .dash-buttons .panel-body {
            background-color: #656D78;
            border: 1px solid #656D78;
            color: #F5F7FA;
            border-radius: 3px;
            /*box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);*/
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
            z-index: 99;
            position: relative;
            transition: .1s linear;
            display: -ms-flexbox;
            display: -webkit-flex;
            display: flex;

            -ms-flex-align: center;
            -webkit-align-items: center;
            -webkit-box-align: center;

            align-items: center;
        }

        .dash-buttons .panel-body span {
            display: inline-block;
            text-align: center;
            width: 100%;
            vertical-align: middle;
            margin-bottom: 4px;
        }

        .bw100 {
            display: block;
            width: 100%;
        }

        .dash-buttons .panel-body:hover {
            background-color: #FC6E51;
            background-color: #049372;
            border: 1px solid #FC6E51;
            border: 1px solid #049372;
            color: #fff;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);
            z-index: 100;
        }

        /*.ps-scrollbar-x-rail,
        .ps-scrollbar-y-rail {
          opacity: 0.6;
        }*/

        .amaran {
            background-color: #434A54 !important;
            color: #fff
        }

        .awesome .icon {
            color: #434A54
        }

        .awesome p.bold, .awesome p span {
            color: #fff;
        }

        .awesome.ok .icon {
            background-color: #049372;
        }

        .awesome.ok p.bold {
            color: #fff !important;
        }

        .awesome.no .icon {
            background-color: #CF3A24;
        }

        .awesome.no p.bold {
            color: #fff !important;
        }

        .awesome.wrn .icon {
            background-color: #F5AB35;
        }

        .navbar-inverse {
            border-radius: 0 0 5px 5px;
            background-color: #656D78;
            border: 1px solid #656D78;
            border-top: 0;
            border: 0;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
            /*overflow: hidden;*/
        }

        .navbar-inverse .navbar-brand {
            color: #fff !important;
        }

        .navbar-inverse a {
            color: #ECF0F1 !important;
        }

        .navbar-inverse a:hover {
            /*color: #6C7A89!important;*/
            background-color: #FC6E51 !important;
            background-color: #049372 !important;
        }

        .open .dropdown-toggle.btn-default {
            background-color: #434a54 !important;
        }

        .navbar-xs {
            min-height: 28px;
            height: 28px;
        }

        .navbar-xs .navbar-brand {
            padding: 0px 12px;
            font-size: 16px;
            line-height: 28px;
        }

        .navbar-xs .navbar-nav > li > a {
            padding-top: 0px;
            padding-bottom: 0px;
            line-height: 28px;
        }

        .navbar-sm {
            min-height: 40px;
            height: 40px;
        }

        .navbar-sm .navbar-brand {
            padding: 0px 12px;
            font-size: 16px;
            line-height: 40px;
        }

        .navbar-sm > li > a {
            padding-top: 0px;
            padding-bottom: 0px;
            line-height: 40px;
        }

        .panel-flt .panel-heading {
            background-color: #95A5A6;
            color: #fff
        }

        .panel-flt .panel-title {
            color: #fff !important;
        }

        .panel-flt .panel-body, .panel-flt .list-group-item {
            background-color: #ECF0F1;
        }

        .panel-flt hr {
            border: 0;
            height: 0;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            margin-top: 10px;
            margin-bottom: 10px;
        }

        .f-h {
            margin-top: 15px;
            margin-bottom: 15px;
            border-top: 3px solid #F2F1EF;
            border-bottom: 3px solid #F2F1EF;
            padding: 5px;
        }

        .b-flt, .b-flt td {
            background-color: #ECF0F1;
        }

        .footer-float {
            position: fixed;
            bottom: 0;
            text-align: center;
            font-size: 9pt;
            left: 50%;
            transform: translateX(-50%);
            width: 400px;
            overflow: visible;
            word-break: keep-all;
            white-space: nowrap;
            opacity: 1;
            padding: 1px;
            background-color: #fff;
            z-index: 100;
            display: none;
        }

        .footer-float div {
        }

        .footer-float:hover {
            opacity: 0;
        }

        body {
            padding-bottom: 20px;
        }

        .navbar-nav > li > a, .navbar-brand {
            padding-top: 8px !important;
            padding-bottom: 8px !important;
        }

        .navbar-brand {
            height: 16px !important;
        }

        .navbar-toggle {
            padding: 3px 10px;
        }

        .navbar {
            min-height: 16px !important;
        }

        .navbar-inverse .navbar-nav > .open > a {
            background: #049372 !important;
        }

        #right-navbar li:last-child a:hover {
            border-bottom-right-radius: 5px;
        }

        .has-warning .twitter-typeahead .tt-input,
        .has-warning .twitter-typeahead .tt-hint {
            border-color: #8a6d3b;
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
        }

        .has-warning .twitter-typeahead .tt-input:focus,
        .has-warning .twitter-typeahead .tt-hint:focus {
            border-color: #66512c;
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #c0a16b;
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #c0a16b;
        }

        .has-error .twitter-typeahead .tt-input,
        .has-error .twitter-typeahead .tt-hint {
            border-color: #a94442;
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
        }

        .has-error .twitter-typeahead .tt-input:focus,
        .has-error .twitter-typeahead .tt-hint:focus {
            border-color: #843534;
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #ce8483;
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #ce8483;
        }

        .has-success .twitter-typeahead .tt-input,
        .has-success .twitter-typeahead .tt-hint {
            border-color: #3c763d;
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
        }

        .has-success .twitter-typeahead .tt-input:focus,
        .has-success .twitter-typeahead .tt-hint:focus {
            border-color: #2b542c;
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #67b168;
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #67b168;
        }

        .input-group .twitter-typeahead:first-child .tt-input,
        .input-group .twitter-typeahead:first-child .tt-hint {
            border-bottom-left-radius: 4px;
            border-top-left-radius: 4px;
            width: 100%;
        }

        .input-group .twitter-typeahead:last-child .tt-input,
        .input-group .twitter-typeahead:last-child .tt-hint {
            border-bottom-right-radius: 4px;
            border-top-right-radius: 4px;
            width: 100%;
        }

        .input-group.input-group-sm .twitter-typeahead .tt-input,
        .input-group.input-group-sm .twitter-typeahead .tt-hint {
            height: 30px;
            padding: 5px 10px;
            font-size: 12px;
            line-height: 1.5;
            border-radius: 3px;
        }

        select.input-group.input-group-sm .twitter-typeahead .tt-input,
        select.input-group.input-group-sm .twitter-typeahead .tt-hint {
            height: 30px;
            line-height: 30px;
        }

        textarea.input-group.input-group-sm .twitter-typeahead .tt-input,
        textarea.input-group.input-group-sm .twitter-typeahead .tt-hint,
        select[multiple].input-group.input-group-sm .twitter-typeahead .tt-input,
        select[multiple].input-group.input-group-sm .twitter-typeahead .tt-hint {
            height: auto;
        }

        .input-group.input-group-sm .twitter-typeahead:not(:first-child):not(:last-child) .tt-input,
        .input-group.input-group-sm .twitter-typeahead:not(:first-child):not(:last-child) .tt-hint {
            border-radius: 0;
        }

        .input-group.input-group-sm .twitter-typeahead:first-child .tt-input,
        .input-group.input-group-sm .twitter-typeahead:first-child .tt-hint {
            border-bottom-left-radius: 3px;
            border-top-left-radius: 3px;
            border-bottom-right-radius: 0;
            border-top-right-radius: 0;
        }

        .input-group.input-group-sm .twitter-typeahead:last-child .tt-input,
        .input-group.input-group-sm .twitter-typeahead:last-child .tt-hint {
            border-bottom-left-radius: 0;
            border-top-left-radius: 0;
            border-bottom-right-radius: 3px;
            border-top-right-radius: 3px;
        }

        .input-group.input-group-lg .twitter-typeahead .tt-input,
        .input-group.input-group-lg .twitter-typeahead .tt-hint {
            height: 46px;
            padding: 10px 16px;
            font-size: 18px;
            line-height: 1.33;
            border-radius: 6px;
        }

        select.input-group.input-group-lg .twitter-typeahead .tt-input,
        select.input-group.input-group-lg .twitter-typeahead .tt-hint {
            height: 46px;
            line-height: 46px;
        }

        textarea.input-group.input-group-lg .twitter-typeahead .tt-input,
        textarea.input-group.input-group-lg .twitter-typeahead .tt-hint,
        select[multiple].input-group.input-group-lg .twitter-typeahead .tt-input,
        select[multiple].input-group.input-group-lg .twitter-typeahead .tt-hint {
            height: auto;
        }

        .input-group.input-group-lg .twitter-typeahead:not(:first-child):not(:last-child) .tt-input,
        .input-group.input-group-lg .twitter-typeahead:not(:first-child):not(:last-child) .tt-hint {
            border-radius: 0;
        }

        .input-group.input-group-lg .twitter-typeahead:first-child .tt-input,
        .input-group.input-group-lg .twitter-typeahead:first-child .tt-hint {
            border-bottom-left-radius: 6px;
            border-top-left-radius: 6px;
            border-bottom-right-radius: 0;
            border-top-right-radius: 0;
        }

        .input-group.input-group-lg .twitter-typeahead:last-child .tt-input,
        .input-group.input-group-lg .twitter-typeahead:last-child .tt-hint {
            border-bottom-left-radius: 0;
            border-top-left-radius: 0;
            border-bottom-right-radius: 6px;
            border-top-right-radius: 6px;
        }

        .twitter-typeahead {
            width: 100%;
            float: left;
        }

        .input-group .twitter-typeahead {
            display: table-cell !important;
        }

        .twitter-typeahead .tt-hint {
            color: #999999;
        }

        .twitter-typeahead .tt-input {
            z-index: 2;
        }

        .twitter-typeahead .tt-input[disabled],
        .twitter-typeahead .tt-input[readonly],
        fieldset[disabled] .twitter-typeahead .tt-input {
            cursor: not-allowed;
            background-color: #eeeeee !important;
        }

        .tt-dropdown-menu,
        .tt-menu {
            position: absolute;
            top: 100%;
            left: 0;
            z-index: 1000;
            min-width: 160px;
            width: 100%;
            padding: 5px 0;
            margin: 2px 0 0;
            list-style: none;
            font-size: 14px;
            background-color: #ffffff;
            border: 1px solid #cccccc;
            border: 1px solid rgba(0, 0, 0, 0.15);
            border-radius: 4px;
            -webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);
            background-clip: padding-box;
            *border-right-width: 2px;
            *border-bottom-width: 2px;
        }

        .tt-dropdown-menu .tt-suggestion,
        .tt-menu .tt-suggestion {
            display: block;
            padding: 3px 20px;
            clear: both;
            font-weight: normal;
            line-height: 1.42857143;
            color: #333333;
        }

        .tt-menu .tt-suggestion:not(:last-child) {
            border-bottom: 1px solid grey;
        }

        .tt-dropdown-menu .tt-suggestion.tt-cursor,
        .tt-menu .tt-suggestion.tt-cursor,
        .tt-dropdown-menu .tt-suggestion:hover,
        .tt-menu .tt-suggestion:hover {
            cursor: pointer;
            text-decoration: none;
            outline: 0;
            background-color: #37BC9B;
            color: #fff;
        }

        .tt-dropdown-menu .tt-suggestion.tt-cursor a,
        .tt-menu .tt-suggestion.tt-cursor a,
        .tt-dropdown-menu .tt-suggestion:hover a,
        .tt-menu .tt-suggestion:hover a {
            color: #262626;
        }

        .tt-dropdown-menu .tt-suggestion p,
        .tt-menu .tt-suggestion p {
            margin: 0;
        }

        .fastlinks a {
            color: #262626;
            padding: 3px;
            border-radius: 3px;
        }

        .fastlinks a:hover {
            color: #fff;
            background-color: rgba(4, 147, 114, 1);
        }

        .modal-dialog {
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, .6), 0 22px 70px 4px rgba(0, 0, 0, 0.56), 0 0 0 1px rgba(0, 0, 0, 0.3) !important;
        }

        #table-researches .btn, .table-researches .btn {
            display: inline-block;
            text-align: left;
            overflow-wrap: normal;
            vertical-align: middle;
            /*width: 25% !important;*/
            float: left;
            border-radius: 0;
            border-collapse: collapse !important;
            height: 31px !important;

            border: 1px solid #6C7A89 !important;

            white-space: nowrap;
            text-overflow: ellipsis;
            overflow: hidden;
            font-size: 13px;
            padding-top: 2px;
            transition: .07s linear box-shadow, .07s linear background;
            padding-left: 3px;
            padding-right: 3px;
        }

        #table-researches .btn input, .table-researches .btn input {
            display: none;
        }

        #table-researches .btn.active-b, .table-researches .btn.active-b {
            border: 1px solid #434A54 !important;
            background: #049372;
            color: #fff;
        }

        #table-researches .btn:hover:not(.active-b), .table-researches .btn:hover:not(.active-b) {
            border: 1px solid #434A54 !important;
            background: #fff;
            color: #434A54;
        }

        #table-researches .btn:hover, .table-researches .btn:hover {
            box-shadow: inset 0 0 8px rgba(0, 0, 0, .8) !important;
        }

        #page-preloader {
            display: none;
            opacity: 0;
            cursor: progress;
        }

        .txt-r {
            text-align: right;
        }

        .pd-r-5 {
            padding-right: 5px;
        }

        .b-top-bord {
            border-top: 2px solid slategray;
        }

        body.showloader #page-preloader {
            display: -webkit-box;
            display: -webkit-flex;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-align: center;
            -webkit-align-items: center;
            -ms-flex-align: center;
            align-items: center;
            -webkit-box-pack: center;
            -webkit-justify-content: center;
            -ms-flex-pack: center;
            justify-content: center;
            position: fixed;
            height: 100%;
            width: 100%;
            background-color: rgba(0, 0, 0, .68);
            left: 0;
            top: 0;
            z-index: 100000;
        }

        .sk-fading-circle {
            width: 20px;
            height: 20px;
            position: relative;
            display: inline-block;
            vertical-align: middle;
            margin-top: 10px;
            margin-bottom: 8px;
        }

        .sk-fading-circle .sk-circle {
            width: 100%;
            height: 100%;
            position: absolute;
            left: 0;
            top: 0;
        }

        .sk-fading-circle .sk-circle:before {
            content: '';
            display: block;
            margin: 0 auto;
            width: 15%;
            height: 15%;
            background-color: #fff;
            border-radius: 100%;
            -webkit-animation: sk-circleFadeDelay 1.2s infinite ease-in-out both;
            animation: sk-circleFadeDelay 1.2s infinite ease-in-out both;
        }

        .sk-fading-circle .sk-circle2 {
            -webkit-transform: rotate(30deg);
            -ms-transform: rotate(30deg);
            transform: rotate(30deg);
        }

        .sk-fading-circle .sk-circle3 {
            -webkit-transform: rotate(60deg);
            -ms-transform: rotate(60deg);
            transform: rotate(60deg);
        }

        .sk-fading-circle .sk-circle4 {
            -webkit-transform: rotate(90deg);
            -ms-transform: rotate(90deg);
            transform: rotate(90deg);
        }

        .sk-fading-circle .sk-circle5 {
            -webkit-transform: rotate(120deg);
            -ms-transform: rotate(120deg);
            transform: rotate(120deg);
        }

        .sk-fading-circle .sk-circle6 {
            -webkit-transform: rotate(150deg);
            -ms-transform: rotate(150deg);
            transform: rotate(150deg);
        }

        .sk-fading-circle .sk-circle7 {
            -webkit-transform: rotate(180deg);
            -ms-transform: rotate(180deg);
            transform: rotate(180deg);
        }

        .sk-fading-circle .sk-circle8 {
            -webkit-transform: rotate(210deg);
            -ms-transform: rotate(210deg);
            transform: rotate(210deg);
        }

        .sk-fading-circle .sk-circle9 {
            -webkit-transform: rotate(240deg);
            -ms-transform: rotate(240deg);
            transform: rotate(240deg);
        }

        .sk-fading-circle .sk-circle10 {
            -webkit-transform: rotate(270deg);
            -ms-transform: rotate(270deg);
            transform: rotate(270deg);
        }

        .sk-fading-circle .sk-circle11 {
            -webkit-transform: rotate(300deg);
            -ms-transform: rotate(300deg);
            transform: rotate(300deg);
        }

        .sk-fading-circle .sk-circle12 {
            -webkit-transform: rotate(330deg);
            -ms-transform: rotate(330deg);
            transform: rotate(330deg);
        }

        .sk-fading-circle .sk-circle2:before {
            -webkit-animation-delay: -1.1s;
            animation-delay: -1.1s;
        }

        .sk-fading-circle .sk-circle3:before {
            -webkit-animation-delay: -1s;
            animation-delay: -1s;
        }

        .sk-fading-circle .sk-circle4:before {
            -webkit-animation-delay: -0.9s;
            animation-delay: -0.9s;
        }

        .sk-fading-circle .sk-circle5:before {
            -webkit-animation-delay: -0.8s;
            animation-delay: -0.8s;
        }

        .sk-fading-circle .sk-circle6:before {
            -webkit-animation-delay: -0.7s;
            animation-delay: -0.7s;
        }

        .sk-fading-circle .sk-circle7:before {
            -webkit-animation-delay: -0.6s;
            animation-delay: -0.6s;
        }

        .sk-fading-circle .sk-circle8:before {
            -webkit-animation-delay: -0.5s;
            animation-delay: -0.5s;
        }

        .sk-fading-circle .sk-circle9:before {
            -webkit-animation-delay: -0.4s;
            animation-delay: -0.4s;
        }

        .sk-fading-circle .sk-circle10:before {
            -webkit-animation-delay: -0.3s;
            animation-delay: -0.3s;
        }

        .sk-fading-circle .sk-circle11:before {
            -webkit-animation-delay: -0.2s;
            animation-delay: -0.2s;
        }

        .sk-fading-circle .sk-circle12:before {
            -webkit-animation-delay: -0.1s;
            animation-delay: -0.1s;
        }

        @-webkit-keyframes sk-circleFadeDelay {
            0%, 39%, 100% {
                opacity: 0;
            }
            40% {
                opacity: 1;
            }
        }

        @keyframes sk-circleFadeDelay {
            0%, 39%, 100% {
                opacity: 0;
            }
            40% {
                opacity: 1;
            }
        }

        .split {
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;

            overflow-y: auto;
            overflow-x: hidden;

            padding: 5px;
        }

        .content {
            border: 1px solid #C0C0C0;
            box-shadow: inset 0 1px 2px #e4e4e4;
            background-color: #fff;
        }

        .gutter.gutter-horizontal {
            cursor: col-resize;
        }

        .gutter.gutter-vertical {
            cursor: row-resize;
        }

        .split-horizontal {
            padding: 0;
        }

        .split.split-horizontal, .gutter.gutter-horizontal {
            height: 100%;
            float: left;
        }

        .dash-buttons .col-md-3 a, .dash-btn a {
            height: 100px;
            position: relative;
        }

        .dash-buttons a .badge {
            position: absolute;
            bottom: 10px;
            right: 100px;
            left: 100px;
        }

        sup {
            font-size: xx-small;
            vertical-align: super;
        }

        .nav-loader {
            display: none;
            max-height: 36px;
            box-sizing: border-box;
        }

        .sloader, .sloader * {
            z-index: 100001;
        }

        .sloader .nav-loader {
            display: block;
        }

        .sloader .nav-cont {
            display: none;
        }

        .card {
            background: #fff;
            border-radius: 2px;
            display: block;
            margin: 1rem;
            position: relative;
            min-height: 10px;
            box-sizing: border-box;
        }

        .card-1 {
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
            transition: all 0.3s cubic-bezier(.25, .8, .25, 1);
        }

        .card-1:hover {
            box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
        }

        .card-2 {
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
        }

        .card-3 {
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);
        }

        .card-4 {
            box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
        }

        .card-5 {
            box-shadow: 0 19px 38px rgba(0, 0, 0, 0.30), 0 15px 12px rgba(0, 0, 0, 0.22);
        }

        .field-22 {
            min-height: 22px;
        }

        .c {
            text-align: center;
        }

        .disable-hover,
        .disable-hover * {
            pointer-events: none !important;
        }

        .btn-ell {
            overflow: hidden;
            text-overflow: ellipsis;
        }
    </style>
    {% block head_cn %}{% endblock %}
</head>
<body>{% load has_group %}
<div class="{% block container %}container{% endblock %}">
    {% block nav %}
        <nav class="navbar navbar-inverse">
            <div class="nav-cont">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                            aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a href="/dashboard"><span class="navbar-brand"><small>{{ request.user.doctorprofile.get_fio }}</small></span></a>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Меню <b class="caret"></b></a>
                            <ul class="dropdown-menu" role="menu" style="z-index: 10000">
                                <li><a href="/dashboard">Главная</a></li>
                                <li><a href="/logout">Выход из профиля</a></li>
                                <li class="divider"></li>
                                <li><a href="/dashboard/directions/multiprint" target="_blank">Печать направлений</a>
                                </li>
                                {% if request.user|has_group:"Получатель биоматериала" %}
                                    <li class="divider"></li>
                                    <li><a href="/dashboard/receive/one_by_one">Прием материала по одному</a></li>
                                {% endif %}
                            </ul>
                        </li>
                    </ul>
                    <ul class="nav navbar-nav navbar-right" id="right-navbar">
                        {% if request.user|has_group:"Лечащий врач" or request.user|has_group:"Оператор лечащего врача" %}
                            <li><a href="/dashboard/directions">Направления</a></li>
                        {% endif %}
                        {% if request.user|has_group:"Заборщик биоматериала" %}
                            <li><a href="/dashboard/researches/control">Взятие материала</a></li>
                        {% endif %}
                        {% if request.user|has_group:"Получатель биоматериала" %}
                            <li><a href="/dashboard/receive">Прием материала</a></li>
                        {% endif %}
                        {% if request.user|has_group:"Врач-лаборант" or request.user|has_group:"Лаборант" %}
                            <li><a href="/results/enter">Ввод результатов</a></li>
                            <li><a href="/results/conformation">Подтверждение и печать результатов</a></li>
                        {% endif %}
                    </ul>
                </div>
            </div>
            <div class="nav-loader center">
                <div class="navbar-header">
                    <span class="navbar-brand"><small>{{ request.user.doctorprofile.get_fio }}</small></span>
                </div>
                <div class="din-spinner" style="text-align: center">
                    <div class="sk-fading-circle">
                        <div class="sk-circle1 sk-circle"></div>
                        <div class="sk-circle2 sk-circle"></div>
                        <div class="sk-circle3 sk-circle"></div>
                        <div class="sk-circle4 sk-circle"></div>
                        <div class="sk-circle5 sk-circle"></div>
                        <div class="sk-circle6 sk-circle"></div>
                        <div class="sk-circle7 sk-circle"></div>
                        <div class="sk-circle8 sk-circle"></div>
                        <div class="sk-circle9 sk-circle"></div>
                        <div class="sk-circle10 sk-circle"></div>
                        <div class="sk-circle11 sk-circle"></div>
                        <div class="sk-circle12 sk-circle"></div>
                    </div>
                    <span style="color: #fff; font-size: 14pt;font-weight: 200;margin-left: 10px;vertical-align: middle;display: inline-block">ЗАГРУЗКА...</span>
                </div>
            </div>
        </nav>
    {% endblock %}
    {% block content %}{% endblock %}
    {% block foot %}
        <div class="footer-float">
            {% load setting %}
            {% s_get "org_title" as org_title %}
            {{ org_title }} | ЛИС | <span class='version'>{{ VERSION }}</span>
        </div>
    {% endblock %}
</div>
<ul id="contextMenu" class="dropdown-menu" role="menu" style="display:none;z-index: 100000">
    <li class="context-st"><a class="noclick" onclick="return false;"><label>Число:<input type="number" value="10"
                                                                                          id="contextNumber"
                                                                                          class="form-control w50"/></label>
        <label>Степень:<input type="number" class="form-control w50" value="1" id="contextSt"/></label></a></li>
    <li class="context-st"><a action="addnum" onclick="return false;" tabindex="-1" href="#">Дописать число со
        степенью</a></li>
    <li class="divider context-st"></li>
    <li class="context-st">
        <div class="input-group" style="max-width: 450px">
            <input type="text" class="noclick form-control" id="recalcValue" placeholder="Пересчитанное значение">
            <span class="input-group-btn">
                    <a action="addrecalc" class="btn btn-primary-nb">Дописать пересчет</a>
              </span>
        </div>
    </li>
    <li class="divider context-st"></li>
    <li class="context-st">
        <div class="input-group" style="max-width: 450px">
            <span class="input-group-addon noclick">п</span>
            <input type="text" class="noclick form-control" id="leicP" maxlength="3" placeholder="п">
            <span class="input-group-addon noclick">c</span>
            <input type="text" class="noclick form-control" id="leicS" maxlength="3" placeholder="c">
            <span class="input-group-addon noclick">э</span>
            <input type="text" class="noclick form-control" id="leicE" maxlength="3" placeholder="э">
            <span class="input-group-addon noclick">м</span>
            <input type="text" class="noclick form-control" id="leicM" maxlength="3" placeholder="м">
            <span class="input-group-addon noclick">л</span>
            <input type="text" class="noclick form-control" id="leicL" maxlength="3" placeholder="л">
            <span class="input-group-btn">
                <a action="addleic" class="btn btn-primary-nb">Ок</a>
            </span>
        </div>
    </li>
    <li class="divider context-st"></li>
    <li><a action="clear" onclick="return false;" tabindex="-1" href="#">Очистка</a></li>
</ul>
<script src="/static/js/bootstrap.min.js?2"></script>
<script src="/static/js/jquery.hotkeys.js"></script>
<script src="/static/js/typeahead.bundle.min.js"></script>
<script src="/static/js/bootstrap-select.js"></script>
<script src="/static/js/bootbox.min.js"></script>
<script src="/static/js/lang.ru.js?n=10"></script>
<script src="/static/perfect-scrollbar/js/perfect-scrollbar.jquery.min.js"></script>
<script src="/static/js/jquery-ui.min.js"></script>
<script src="/static/js/jquery.isloading.min.js"></script>
<script src="/static/js/jquery.scrollTo.js"></script>
<script src="/static/bootflat/js/jquery.fs.selecter.min.js"></script>
<script src="/static/bootflat/js/jquery.fs.stepper.min.js"></script>
<script src="/static/bootflat/js/icheck.min.js"></script>
<script src="/static/js/jquery.amaran.min.js"></script>
<script src="/static/js/jquery.tooltipster.min.js"></script>
<script src="/static/js/jquery.floatThead.min.js?3"></script>
<script src="/static/js/context.jq.bs.js"></script>
<script>
    var ajax_cache_token = (new Date()) + "";
    $body = $("body");
    var $loader = {};

    $loader.Particle = function (opt) {
        this.radius = 7;
        this.x = opt.x;
        this.y = opt.y;
        this.angle = opt.angle;
        this.speed = opt.speed;
        this.accel = opt.accel;
        this.decay = 0.01;
        this.life = 1;
    };

    $loader.Particle.prototype.step = function (i) {
        this.speed += this.accel;
        this.x += Math.cos(this.angle) * this.speed;
        this.y += Math.sin(this.angle) * this.speed;
        this.angle += $loader.PI / 64;
        this.accel *= 1.01;
        this.life -= this.decay;

        if (this.life <= 0) {
            $loader.particles.splice(i, 1);
        }
    };

    $loader.Particle.prototype.draw = function (i) {
        $loader.ctx.fillStyle = $loader.ctx.strokeStyle = 'hsla(' + ( $loader.tick + ( this.life * 120 ) ) + ', 100%, 60%, ' + this.life + ')';
        $loader.ctx.beginPath();
        if ($loader.particles[i - 1]) {
            $loader.ctx.moveTo(this.x, this.y);
            $loader.ctx.lineTo($loader.particles[i - 1].x, $loader.particles[i - 1].y);
        }
        $loader.ctx.stroke();

        $loader.ctx.beginPath();
        $loader.ctx.arc(this.x, this.y, Math.max(0.001, this.life * this.radius), 0, $loader.TWO_PI);
        $loader.ctx.fill();

        var size = Math.random() * 1.25;
        $loader.ctx.fillRect(~~( this.x + ( ( Math.random() - 0.5 ) * 35 ) * this.life ), ~~( this.y + ( ( Math.random() - 0.5 ) * 35 ) * this.life ), size, size);
    };

    $loader.step = function () {
        $loader.particles.push(new $loader.Particle({
            x: $loader.width / 2 + Math.cos($loader.tick / 20) * $loader.min / 2,
            y: $loader.height / 2 + Math.sin($loader.tick / 20) * $loader.min / 2,
            angle: $loader.globalRotation + $loader.globalAngle,
            speed: 0,
            accel: 0.01
        }));

        $loader.particles.forEach(function (elem, index) {
            elem.step(index);
        });

        $loader.globalRotation += $loader.PI / 6;
        $loader.globalAngle += $loader.PI / 6;
    };

    $loader.draw = function () {
        $loader.ctx.clearRect(0, 0, $loader.width, $loader.height);

        $loader.particles.forEach(function (elem, index) {
            elem.draw(index);
        });
    };

    $loader.init = function () {
        $loader.canvas = document.getElementById("loader-canvas");
        $loader.ctx = $loader.canvas.getContext('2d');
        $loader.width = $loader.canvas.width = 150;
        $loader.height = $loader.canvas.height = 150;
        $loader.min = $loader.width * 0.5;
        $loader.particles = [];
        $loader.globalAngle = 0;
        $loader.globalRotation = 0;
        $loader.tick = 0;
        $loader.PI = Math.PI;
        $loader.TWO_PI = $loader.PI * 2;
        $loader.ctx.globalCompositeOperation = 'lighter';
        $loader.loop();
    };
    var exitLoop = false;
    $loader.loop = function () {
        if (exitLoop) {
            exitLoop = false;
            return;
        }
        requestAnimationFrame($loader.loop);
        $loader.step();
        $loader.draw();
        $loader.tick++;
    };
    String.prototype.replaceAll = function (search, replacement) {
        var target = this;
        return target.split(search).join(replacement);
    };
    String.prototype.capitalize = function () {
        return this.charAt(0).toUpperCase() + this.slice(1);
    };
    String.prototype.capitalizeAll = function () {
        var r;
        r = this;
        for (var s of this.split(" ")) {
            r = r.replace(s, s.capitalize());
        }
        return r;
    };

    String.prototype.format = String.prototype.f = function () {
        var s = this,
                i = arguments.length;

        while (i--) {
            s = s.replace(new RegExp('\\{' + i + '\\}', 'gm'), arguments[i]);
        }
        return s;
    };
    Array.prototype.reversedCopy = function () {
        var arr = [];
        for (var i = this.length; i--;) {
            arr.push(this[i]);
        }
        return arr;
    };
    if (!Array.prototype.last) {
        Array.prototype.last = function () {
            return this[this.length - 1];
        };
    }

    function startTime() {
        var today = new Date();
        var h = today.getHours();
        var m = today.getMinutes();
        var s = today.getSeconds();
        if (h < 10) h = " " + h;
        m = checkTime(m);
        s = checkTime(s);
        //document.getElementById('clock').innerHTML = h + ":" + m + ":" + s;
        var t = setTimeout(function () {
            startTime()
        }, 500);
    }

    function checkTime(i) {
        if (i < 10) {
            i = "0" + i
        }
        return i;
    }
    function uHash() {
        indx = document.URL.indexOf('#');
        if (indx == -1)
            return "";
        return document.URL.substr(indx + 1);
    }

    function setUHash(hash) {
        if (hash === "" || hash === {} || hash == null) {
            history.pushState("", document.title, window.location.pathname + window.location.search);
            return;
        }
        if (typeof hash === 'object') {
            hash = JSON.stringify(hash);
        }

        history.pushState("", document.title, window.location.pathname + window.location.search + "#" + hash);
    }

    function sTitle(title) {
        document.title = title;
    }
    var stopped = true;
    var inload = false;
    function sl(no_sloader) {
        if(!inload){
            document.title = lang.loading + document.title;
        }
        inload = true;
        $("#page-preloader").css({opacity: 0});
        if (!no_sloader) {
            $(".navbar").addClass("sloader");
            stopped = false;
            setTimeout(function () {
                if (stopped) return;
                $("#page-preloader").animate({opacity: 1}, 7000);
            }, 1500);
        }
        $("#page-preloader").show();
        //$loader.init();
    }
    function hl() {
        document.title = document.title.replace(lang.loading, "");
        inload = false;
        $(".navbar").removeClass("sloader");
        $("#page-preloader").hide();
        exitLoop = true;
        stopped = true;
        $("#page-preloader").stop(true, true);
    }
    $(document).ready(function () {
        $('.select-b').selectpicker({
            deselectAllText: "Снять выбор",
            selectAllText: "Выбрать всё",
            noneSelectedText: "Ничего не выбрано"
        });
        //startTime();
        $("#page-preloader").hide();
        $body.addClass("showloader");
        alive();
        $(".context-st").hide();
        $.contextMenu({
            elementSelector: "input.form-control:not(.tt-hint):not(.no-context),textarea:not(.no-context)",
            menuSelector: "#contextMenu",
            menuSelected: function (invokedOn, selectedMenu) {
                switch (selectedMenu.attr("action")) {
                    case "clear":
                        invokedOn.val("").typeahead('val', "");
                        break;
                    case "addnum":
                        val = invokedOn.val() + $("#contextNumber").val() + "<sup>" + $("#contextSt").val() + "</sup>";
                        $(invokedOn).val(val);
                        $(invokedOn).typeahead('val', val);
                        $("#contextNumber").val(10);
                        $("#contextSt").val(1);
                        break;
                    case "addrecalc":
                        r = $("#recalcValue").val();
                        if (r != "") {
                            r = " " + r;
                        }
                        val = `${invokedOn.val()} (пересчитано${r})`;
                        $(invokedOn).val(val);
                        $(invokedOn).typeahead('val', val);
                        $("#recalcValue").val("");
                        break;
                    case "addleic":
                        val = `${invokedOn.val()}п${$("#leicP").val()}\\с${$("#leicS").val()}\\э${$("#leicE").val()}\\м${$("#leicM").val()}\\л${$("#leicL").val()}`;
                        $(invokedOn).val(val);
                        $(invokedOn).typeahead('val', val);
                        $("#leicP,#leicE,#leicL,#leicM,#leicS").val("");
                        break;
                }
                invokedOn.focus();
            }
        });
    });
    var willbe_error = false;
    function alive() {
        $.ajax({
            method: "GET", url: "/dashboard/", cache: false, statusCode: {
                500: function () {
                    $.amaran({
                        'theme': 'awesome no',
                        'content': {
                            title: 'Сервер недоступен',
                            message: "Ошибка 500. Ожидайте доступность сервера.",
                            info: '',
                            icon: 'fa fa-exclamation'
                        },
                        'position': 'bottom right',
                        delay: 13000
                    });
                    willbe_error = true;
                    sl(true);
                },
                502: function () {
                    $.amaran({
                        'theme': 'awesome no',
                        'content': {
                            title: 'Сервер недоступен',
                            message: "Ошибка 502. Ожидайте доступность сервера.",
                            info: '',
                            icon: 'fa fa-exclamation'
                        },
                        'position': 'bottom right',
                        delay: 13000
                    });
                    willbe_error = true;
                    sl(true);
                },
                302: function () {
                    document.location.href = "/";
                }
            }
        }).done(function () {
            if (willbe_error) {
                willbe_error = false;
                $.amaran({
                    'theme': 'awesome ok',
                    'content': {
                        title: 'Сервер доступен',
                        message: "ОК",
                        info: '',
                        icon: 'glyphicon glyphicon-ok'
                    },
                    'position': 'bottom right',
                    delay: 30000
                });
                hl();
            }
        }).always(function () {
            setTimeout(alive, 13000);
        });
    }
    $(document).ajaxComplete(checkSession);
    function checkSession(event, xhr, ajaxOptions) {
        if (xhr.readyState == 4) {
            if (xhr.getResponseHeader("Login-Screen") != null && xhr.getResponseHeader("Login-Screen").length) {
                document.location.href = "/";
            }
        }
    }
    $.extend($.expr[':'], {
        textboxEmpty: function (el) {
            return $(el).val() === "";
        }
    });

    function convertArrayOfObjectsToCSV(args) {
        var result, ctr, keys, columnDelimiter, lineDelimiter, data;

        data = args.data || null;
        if (data == null || !data.length) {
            return null;
        }

        columnDelimiter = args.columnDelimiter || ';';
        lineDelimiter = args.lineDelimiter || '\n';

        keys = Object.keys(data[0]);

        result = '';
        result += keys.join(columnDelimiter);
        result += lineDelimiter;

        data.forEach(function (item) {
            ctr = 0;
            keys.forEach(function (key) {
                if (ctr > 0) result += columnDelimiter;

                result += item[key];
                ctr++;
            });
            result += lineDelimiter;
        });

        return result;
    }

    function downloadCSV(args) {
        var data, filename, link;

        var csv = convertArrayOfObjectsToCSV({
            data: args.data || {}
        });
        if (csv == null) return;

        filename = args.filename || 'export.csv';

        if (!csv.match(/^data:text\/csv/i)) {
            csv = 'data:text/csv;charset=utf-8,' + csv;
        }
        data = encodeURI(csv);

        link = document.createElement('a');
        link.setAttribute('href', data);
        link.setAttribute('download', filename);
        link.click();
    }

    function okmessage(title, body, delay) {
        $.amaran({
            'theme': 'awesome ok',
            'content': {
                title: title,
                message: body || "",
                info: '',
                icon: 'fa fa-exclamation'
            },
            'position': 'bottom right',
            delay: delay || 5000
        });
    }

    function errmessage(title, body, delay) {
        $.amaran({
            'theme': 'awesome no',
            'content': {
                title: title,
                message: body || "",
                info: '',
                icon: 'fa fa-exclamation'
            },
            'position': 'bottom right',
            delay: delay || 5000
        });
    }
    var blink_animated = {};
    function okblink(selector, effect) {
        if (blink_animated[selector]) return;
        e = effect || 'fadeIn';
        $(selector).removeClass(e).removeClass('animated fast');
        $(selector).addClass(e).addClass("animated fast");
        blink_animated[selector] = true;
        setTimeout(function (s) {
            $(selector).removeClass(e).removeClass('animated fast');
            blink_animated[s] = false;
        }.bind(this, selector), 334);

    }

</script>
{% block scripts %}{% endblock %}
<div id="page-preloader" style="text-align: center"></div>
</body>
</html>