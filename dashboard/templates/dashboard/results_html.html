{% extends "dbase.html" %}
{% block title %}Просмотр результатов{% endblock %}
{% block container %}container-fluid{% endblock %}
{% block nav %}{% endblock %}
{% block content %}
    <div class="row">
        {% for row in results %}
            <div class="col-xs-12 col-md-6 col-lg-4 result-block">
                <table style="width: 100%">
                    <tr>
                        <td style="text-align: left" id="res-dir-num">№ {{ row.pk }}</td>
                        <td style="text-align: center"></td>
                        <td style="text-align: right">Дата: <span id="res-date">{{ row.date }}</span></td>
                    </tr>
                    <tr>
                        <td style="text-align: left" colspan="2">ФИО: <span id="res-fio">{{ row.patient.fio }}</span>
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align: left">Номер карты: <span
                                id="res-cardnum">{{ row.patient.cardnum }}</span></td>
                        <td style="text-align: center">Пол: <span id="res-sex">{{ row.patient.sex }}</span></td>
                        <td style="text-align: right">Возраст: <span id="res-age">{{ row.patient.age }}</span>
                        </td>
                    </tr>
                </table>
                <table class="table ct" id="results-tb" style="width: 100%">
                    <thead>
                    <tr>
                        <th style="padding: 2px">Исследование</th>
                        <th style="padding: 2px;width: 190px">Значение</th>
                        <th style="padding: 2px;width: 110px">Еденицы измерения</th>
                        <th style="padding: 2px;width: 35%">Референсы</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for subkey, subrow in row.results.items %}
                        {% if subrow.fractions|length > 1 %}
                        <tr>
                            <td colspan="4">{{ subrow.title }}</td>
                        </tr>
                        {% endif %}
                        {% for skey, srow in subrow.fractions.items %}
                            <tr>
                                <td>{% if subrow.fractions|length > 1 %}&nbsp;&nbsp;&nbsp;&nbsp;{% endif %}{{ srow.title }}</td>
                                <td>{{ srow.result|safe }}</td>
                                <td>{{ srow.units|safe }}</td>
                                <td></td>
                            </tr>
                        {% endfor %}
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        {% endfor %}
    </div>
{% endblock %}
{% block foot %}{% endblock %}
{% block scripts %}
    <style>
        .result-block {
            border: 1px solid #606d7a;
        }

        table.ct {
            border-collapse: collapse;
            margin-top: 5px
        }

        table.ct td {
            border-collapse: collapse;
            margin-top: 5px;

            padding: 2px !important;
        }

        table.ct, .ct th, .ct td, .ct tr, .ct tbody, .ct thead {
            border: 1px solid black !important;
            font-weight: normal;
            background-color: #fff;
        }
    </style>
{% endblock %}